<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>表情包 on Moy's Blog</title><link>https://moyf.github.io/hugo-stack-blog/tags/%E8%A1%A8%E6%83%85%E5%8C%85/</link><description>Recent content in 表情包 on Moy's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 19 Jan 2024 12:24:00 +0000</lastBuildDate><atom:link href="https://moyf.github.io/hugo-stack-blog/tags/%E8%A1%A8%E6%83%85%E5%8C%85/index.xml" rel="self" type="application/rss+xml"/><item><title>2024 年如何保存微信表情包</title><link>https://moyf.github.io/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/</link><pubDate>Fri, 19 Jan 2024 12:24:00 +0000</pubDate><guid>https://moyf.github.io/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/</guid><description>&lt;img src="https://moyf.github.io/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/240119_%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85%E4%BF%9D%E5%AD%98%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%8E%A2%E7%B4%A2-img-1.png" alt="Featured image of post 2024 年如何保存微信表情包" />&lt;h1 id="微信表情包保存与破解探索">微信表情包保存与破解探索&lt;/h1>
&lt;p>很多网上的方法现在都已经失效了，自己重新探索了一遍，整理了当前还有效的方法。&lt;br>
顺便探索了一下PC端的加密表情文件，但没有结果哈哈。&lt;/p>
&lt;h2 id="保存表情包">保存表情包&lt;/h2>
&lt;h3 id="最简单的方法微信公众号">最简单的方法：微信公众号&lt;/h3>
&lt;p>如果只想简单直接地保存某个特定表情包，可以搜索「表情保存助手」公众号：&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/240119_%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85%E4%BF%9D%E5%AD%98%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%8E%A2%E7%B4%A2-img-1.png"
width="1179"
height="2556"
loading="lazy"
class="gallery-image"
data-flex-grow="46"
data-flex-basis="110px"
>&lt;/p>
&lt;p>关注公众号后，直接发送表情，等一会儿就会收到一个表情包下载的链接。&lt;br>
试了一下存下来的 gif 质量挺不错的，也有透明底，也会动：&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/quicker_e60eedc9-7dca-4035-996e-32f38d09cee4.gif"
width="240"
height="240"
loading="lazy"
alt="超级秋千人-来自新月同行"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;blockquote>
&lt;p>这个表情包是《新月同行》的超级秋千人，特别逗的两套，可惜目前只有微信上架了……我就是为了保存她的几张表情才折腾这篇文章的！&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>缺点就是这个公众号时不时要看广告。&lt;/strong>&lt;/p>
&lt;h3 id="其他提取方法呢">其他提取方法呢&lt;/h3>
&lt;p>另外还尝试了比较热门的几种方案。&lt;/p>
&lt;h4 id="一发给自己的微信公众号">一、发给自己的微信公众号&lt;/h4>
&lt;p>为了存表情专门开个公众号有点太劳民伤财了……但……&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/240119_%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85%E4%BF%9D%E5%AD%98%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%8E%A2%E7%B4%A2-img-3.png"
width="360"
height="285"
loading="lazy"
class="gallery-image"
data-flex-grow="126"
data-flex-basis="303px"
>&lt;/p>
&lt;p>——&lt;strong>还真可行&lt;/strong>。&lt;/p>
&lt;p>我估计上面的那个表情助手公众号也是相同原理，只是后台做了个自动化流程帮你把图片转存下来，然后给个临时的下来链接。&lt;/p>
&lt;h4 id="二文件传输助手--网页版微信">二、文件传输助手 / 网页版微信&lt;/h4>
&lt;p>都不行，会显示「该类型不支持」：&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/240119_%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85%E4%BF%9D%E5%AD%98%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%8E%A2%E7%B4%A2-img-2.png"
width="356"
height="258"
loading="lazy"
class="gallery-image"
data-flex-grow="137"
data-flex-basis="331px"
>&lt;/p>
&lt;h4 id="三使用小工具">三、使用小工具&lt;/h4>
&lt;p>如果真的有大批量的表情想要转换，那就需要在电脑上进行操作了。&lt;/p>
&lt;p>这里有一篇指导文章：&lt;br>
&lt;a class="link" href="https://blog.csdn.net/m0_69862284/article/details/131118173" target="_blank" rel="noopener"
>怎么把微信表情包存到电脑上？亲测有效！_微信表情导出到电脑 2023-CSDN博客&lt;/a>&lt;/p>
&lt;p>大概就是用了网友「天才小网关」（神奇的ID！）开发的一个叫做「微信表情包吸血鬼」（更神奇的软件名！）工具，来把电脑上储存的加密文件给转换出来。&lt;/p>
&lt;p>我试了一下，是有用的。&lt;br>
有需要的话也可以直接在这里下载工具：&lt;br>
&lt;a class="link" href="https://www.qinyuanyang.com/post/338.html" target="_blank" rel="noopener"
>【微信表情包吸血鬼】软件，一键导出所有微信表情包，有趣的表情包，不再只限一个APP使用-软件资源-天才小网管&lt;/a>&lt;/p>
&lt;p>但是吧，这个软件也是付费的：&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/240119_%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85%E4%BF%9D%E5%AD%98%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%8E%A2%E7%B4%A2-img-4.png"
width="716"
height="345"
loading="lazy"
class="gallery-image"
data-flex-grow="207"
data-flex-basis="498px"
>&lt;/p>
&lt;p>有免费模式，可以每个分类导出10个表情作为预览。&lt;br>
一套表情包可能会有10几个表情，如果只是想抓几个好用的话一般也够了。&lt;/p>
&lt;p>自定义表情也能导出，但是只有10个，这样就不太够哈哈。&lt;/p>
&lt;p>导出的效果也没问题的：&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/2448.gif"
width="240"
height="240"
loading="lazy"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;p>如果要求高的话可以花￥40买个注册码。&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/240119_%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85%E4%BF%9D%E5%AD%98%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%8E%A2%E7%B4%A2-img-6.png"
width="568"
height="235"
loading="lazy"
class="gallery-image"
data-flex-grow="241"
data-flex-basis="580px"
>&lt;/p>
&lt;blockquote>
&lt;p>顺便，这个开发者好像专攻微信相关的数据提取……看了一下有好多相关工具。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>我自己提取出来的在这里：&lt;br>
&lt;a class="link" href="file:%5c%5cE:%5cDocuments%5cWeChat%20Files%5c%e8%a1%a8%e6%83%85%e5%8c%85" >微信提取表情包&lt;/a> （本地路径）&lt;/p>
&lt;/blockquote>
&lt;h4 id="提取微信图片而非表情包">提取微信图片（而非表情包）&lt;/h4>
&lt;p>虽然都是微信的媒体文件，但图片和表情好像是两套内容。&lt;/p>
&lt;p>如果想提取图片，这里也顺便找到了一个工具：WxLib&lt;br>
来自：&lt;br>
&lt;a class="link" href="https://blog.csdn.net/weixin_42324309/article/details/127802746" target="_blank" rel="noopener"
>微信DAT文件解密（dat转图像）_微信图片dat解密工具-CSDN博客&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/240119_%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85%E4%BF%9D%E5%AD%98%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%8E%A2%E7%B4%A2-img-5.png"
width="1112"
height="812"
loading="lazy"
class="gallery-image"
data-flex-grow="136"
data-flex-basis="328px"
>&lt;/p>
&lt;blockquote>
&lt;p>2022年06月，微信电脑版发布更新后，新产生的微信聊天图片不会再保存到：微信文件管理目录\微信号\FileStorage\Image\年月&lt;/p>
&lt;p>而是改成了存储到：微信文件管理目录\微信号\FileStorage\MsgAttach\聊天对象标识\Image\年月&lt;/p>
&lt;/blockquote>
&lt;h2 id="破解表情包">破解表情包&lt;/h2>
&lt;p>后面一大堆资料，零零总总的……&lt;/p>
&lt;p>但大概意思是：&lt;mark>现在微信存的 &lt;code>.dat&lt;/code> 文件都是加密过的。&lt;/mark>&lt;/p>
&lt;p>图片还好一点，用的是异或，只需要把二进制文件批量处理一遍就行。&lt;br>
表情包好像加上 RSA 了，这玩意儿不搞软件逆向谁搞得定啊……！&lt;/p>
&lt;p>从天才小网管那个软件也可以倒推，是需要本机登录的微信账号的 key 的。&lt;br>
&lt;strong>这个没必要深究下去了，到此为止吧。&lt;/strong>&lt;/p>
&lt;p>总之，不好弄。&lt;br>
有需求就用上面法子吧，别自己折腾了。&lt;/p>
&lt;h3 id="博客园的帖子">博客园的帖子&lt;/h3>
&lt;p>最开始找到的是这个参考资料：&lt;br>
&lt;a class="link" href="https://www.cnblogs.com/Esquecer/p/10718444.html" target="_blank" rel="noopener"
>搞搞电脑微信表情的破解（.dat转png or jpg） - Esquecer - 博客园&lt;/a>&lt;/p>
&lt;h4 id="摘要">摘要&lt;/h4>
&lt;p>然后找到了我微信源文件的Image文件。发现源文件都是清一色.dat格式文件。&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/28eadcbcb7be2f8c622a7391f97d5092_MD5.png"
width="807"
height="525"
loading="lazy"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="368px"
>&lt;br>
这时候第一步直接把后缀改了jpg :（ 很失望，不行，无法打开文件。&lt;/p>
&lt;p>然后去谷歌搜了一下，大牛们都说是 &lt;mark>微信用异或操作加密了Jpg&lt;/mark>.&lt;br>
于是朝这个方向入手。&lt;/p>
&lt;p>首先下载notepad++,再给它配上Hex-Editor插件，这样我们就能用notepad++用16进制打开dat了&lt;/p>
&lt;p>我的办法是：&lt;/p>
&lt;p>第一步：就是从网上（&lt;a class="link" href="https://sourceforge.net/projects/npp-plugins/files/Hex%20Editor/" target="_blank" rel="noopener"
>https://sourceforge.net/projects/npp-plugins/files/Hex%20Editor/&lt;/a>）下载Hex-Editor.dll文件。 &lt;br>
第二步：然后拷贝到你自己notepad安装目录的plugins子文件夹下。 &lt;br>
第三步：最后重启notepad。&lt;/p>
&lt;p>&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/3ed8be7960bfd12ed6aeecbb7af2a61a_MD5.png"
width="581"
height="346"
loading="lazy"
class="gallery-image"
data-flex-grow="167"
data-flex-basis="403px"
>&lt;/p>
&lt;p>&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/ac213e958e53062375986177424af3a6_MD5.png"
width="606"
height="411"
loading="lazy"
class="gallery-image"
data-flex-grow="147"
data-flex-basis="353px"
>&lt;/p>
&lt;p>然后在这里打开16进制显示，就好了。&lt;/p>
&lt;p>这样我们就得到了16进制源文件。&lt;br>
我以下图为样例分析。&lt;/p>
&lt;p>&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/2024-%E5%B9%B4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E8%A1%A8%E6%83%85%E5%8C%85/Assets/fd556debc8c22db1f84c3f6a74cb217e_MD5.png"
width="1003"
height="487"
loading="lazy"
class="gallery-image"
data-flex-grow="205"
data-flex-basis="494px"
>&lt;/p>
&lt;p>这是打开的DAT文件，前三位是4F 96 88。按照网上大牛说了 做过了异或操作 再存储的。那么我们来试着还原。&lt;/p>
&lt;p>给出参考文件头：&lt;/p>
&lt;ul>
&lt;li>JPEG (jpg)，文件头：FFD8FF&lt;/li>
&lt;li>PNG (png)，文件头：89504E47&lt;/li>
&lt;li>GIF (gif)，文件头：47494638&lt;/li>
&lt;/ul>
&lt;p>好办了，直接逐个测试下。&lt;/p>
&lt;p>我发现我这个dat 是 4F^C6 = 89,96^C6 = 50,88^C6=4E&lt;br>
对应得上PNG格式的文件。&lt;/p>
&lt;p>然后就是java打开文件重新异或之后输入输出啦。&lt;/p>
&lt;p>JAVA代码(对单个文件操作，折叠的是对整个文件夹操作)&lt;/p>
&lt;p>这里有个彩蛋是：本来想用python操作文件的（方便），但是本人配置了近5小时sublime+python3，因为各种墙（GFW牛逼）的问题和各种插件需要慢慢安装体验感很差，遂投入java怀抱（真香）&lt;/p>
&lt;hr>
&lt;h3 id="吾爱破解上的帖子">吾爱破解上的帖子&lt;/h3>
&lt;p>&lt;a class="link" href="https://www.52pojie.cn/thread-1786582-1-1.html" target="_blank" rel="noopener"
>微信表情包导出工具 实测别人发的也会导出 - 『原创发布区』 - 吾爱破解 - LCG - LSG |安卓破解|病毒分析|www.52pojie.cn&lt;/a>&lt;/p>
&lt;p>这个是最新的，2023年5月份，看起来挺靠谱。&lt;br>
但是没有 52 的账号……玩不了。&lt;/p>
&lt;h3 id="其他">其他&lt;/h3>
&lt;h4 id="python-一号">Python 一号&lt;/h4>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/theLeMon/article/details/105471160?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-105471160-blog-132631988.235%5ev40%5epc_relevant_anti_t3&amp;amp;spm=1001.2101.3001.4242.1&amp;amp;utm_relevant_index=1" target="_blank" rel="noopener"
>PC版微信加密图片解密思路与代码实现_Python_微信电脑版图片另存代码-CSDN博客&lt;/a>&lt;br>
用 Python 实现了一版，20年的，可能有点老。&lt;/p>
&lt;p>摘要：&lt;/p>
&lt;p>存储的文件均为DAT格式。不能直接打开。当用户删掉聊天记录后，又想找回丢失的图片文件会造成一定的困扰。如果能找到其加密方式就能对这类文件解密还原成jpg/png/gif等常见的文件格式。&lt;/p>
&lt;h4 id="解密思路">解密思路&lt;/h4>
&lt;ul>
&lt;li>这类对文件加密的方式很容易让人联想到“异或法加密”，即对文件逐个字节与加密码进行异或计算得到加密文件。&lt;/li>
&lt;li>使用16进制的方式打开DAT文件，可见几乎前两个字节均为 0xDF，0xF8。 &lt;br>
&lt;img src="https://img-blog.csdnimg.cn/20200412155528748.png"
loading="lazy"
alt="在这里插入图片描述"
>&lt;/li>
&lt;li>而jpg头信息前两个字节为0xFF, 0xD8。用0xDF与0xFF做异或运算，0xF8与0xD8做异或运算。&lt;mark>结果均为0x20。因此可得加密码为0x20&lt;/mark>（但在实际操作中，每个用户的加密码都不一样，需要在程序中计算出的加密码）。&lt;/li>
&lt;/ul>
&lt;h4 id="代码">代码&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 图片字节头信息， &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">为jpg头信息&lt;/span>&lt;span class="err">，&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">为png头信息&lt;/span>&lt;span class="err">，&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="n">为gif头信息&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pic_head&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mh">0xff&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0xd8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x89&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x50&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x47&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x49&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 解密码 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">decode_code&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">get_code&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 自动判断文件类型，并获取dat文件解密码
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :param file_path: dat文件路径
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :return: 如果文件为jpg/png/gif格式，则返回解密码，否则返回0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;rb&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_read&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dat_file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">head_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">head_index&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pic_head&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 使用第一个头信息字节来计算加密码 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 第二个字节来验证解密码是否正确 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">code&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dat_read&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">^&lt;/span> &lt;span class="n">pic_head&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">head_index&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idf_code&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dat_read&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">^&lt;/span> &lt;span class="n">code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">head_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">head_index&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">idf_code&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">pic_head&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">head_index&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">head_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">head_index&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;not jpg, png, gif&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">decode_dat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 解密文件，并生成图片
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :param file_path: dat文件路径
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :return: 无
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">decode_code&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_code&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;rb&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pic_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file_path&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;.jpg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pic_write&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pic_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;wb&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">dat_data&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">dat_file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">dat_byte&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">dat_data&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pic_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dat_byte&lt;/span> &lt;span class="o">^&lt;/span> &lt;span class="n">decode_code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pic_write&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">bytes&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">pic_data&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pic_name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;完成&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pic_write&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">find_datfile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dir_path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 获取dat文件目录下所有的文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :param dir_path: dat文件目录
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :return: 无
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">files_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">listdir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dir_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">file_name&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">files_list&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dir_path&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\\&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">file_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">decode_dat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;请输入需要解密微信dat文件的目录:&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">find_datfile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="python-二号">Python 二号&lt;/h4>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/qq_37673902/article/details/115128577" target="_blank" rel="noopener"
>python微信数据解密-dat文件转图片(支持JPG,PNG,GIF)_微信dat转图片-CSDN博客&lt;/a>&lt;/p>
&lt;p>没怎么写思路，直接上的代码。&lt;/p>
&lt;h4 id="代码-1">代码&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;span class="lnt">96
&lt;/span>&lt;span class="lnt">97
&lt;/span>&lt;span class="lnt">98
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># weixin_Image.dat 破解 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># JPG 16进制 FF D8 FF &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># PNG 16进制 89 50 4e 47 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># GIF 16进制 47 49 46 38 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 微信.bat 16进制 a1 86-----&amp;gt;jpg ab 8c----jpg dd 04 ---&amp;gt;png &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 自动计算异或 值 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">into_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;C:/image&amp;#39;&lt;/span> &lt;span class="c1"># 微信image文件路径 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">out_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s2">&amp;#34;C:/image/jpg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">into_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">out_path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Dat_files&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">into_path&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 把路径文件夹下的dat文件以列表呈现 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lens&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dat_list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">lens&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;没有dat文件&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">exit&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">dat_file&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">dat_list&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># 逐步读取文件 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">num&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">into_path&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">dat_file&lt;/span> &lt;span class="c1"># 拼接路径：微信图片路径+图片名 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_file_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dat_file&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># 截取字符串 去掉.dat &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">imageDecode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dat_file_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">out_path&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 转码函数 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">num&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">lens&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 显示进度 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;正在处理---&amp;gt;&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s1">%&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">Dat_files&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dir&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :param file_dir: 寻找文件夹下的dat文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :return: 返回文件夹下dat文件的列表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">files&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">listdir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dir&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">splitext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">files&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;.dat&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">files&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">dat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">imageDecode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dat_file_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">out_path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_read&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;rb&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 读取.bat 文件 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">xo&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp_path&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 判断图片格式 并计算返回异或值 函数 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;.png&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;.gif&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;.jpg&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">out&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">out_path&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">dat_file_name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">mat&lt;/span> &lt;span class="c1"># 图片输出路径 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">png_write&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;wb&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 图片写入 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_read&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">seek&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 重置文件指针位置 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">now&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">dat_read&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># 循环字节 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">nowByte&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">now&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">newByte&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nowByte&lt;/span> &lt;span class="o">^&lt;/span> &lt;span class="n">xo&lt;/span> &lt;span class="c1"># 转码计算 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">png_write&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">bytes&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">newByte&lt;/span>&lt;span class="p">]))&lt;/span> &lt;span class="c1"># 转码后重新写入 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_read&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">png_write&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 计算异或值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 各图片头部信息
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> png：89 50 4e 47
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> gif： 47 49 46 38
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> jpeg：ff d8 ff
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;rb&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="mh">0x89&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x50&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x4e&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0x47&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x49&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x46&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mh">0xff&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0xd8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0xff&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">now&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">dat_r&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">xor&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># 记录是第几个格式 1：png 2：gif 3：jpeg &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">now2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">now&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># 取前三组判断 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">nowByte&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">now2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nowByte&lt;/span> &lt;span class="o">^&lt;/span> &lt;span class="n">xor&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">mark&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">mark&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">j&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">finally&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dat_r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 运行 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;__main__&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">into_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">out_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="csdn-的网友逆向过程">csdn 的网友逆向过程&lt;/h3>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/ljc545w/article/details/123259966?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170564637016800225569637%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;amp;request_id=170564637016800225569637&amp;amp;biz_id=0&amp;amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-1-123259966-null-null.142%5ev99%5epc_search_result_base1&amp;amp;utm_term=%E5%BE%AE%E4%BF%A1%20%E8%A1%A8%E6%83%85%20%E8%A7%A3%E5%AF%86" target="_blank" rel="noopener"
>PC微信逆向获取聊天表情_微信 customemotion文件解密-CSDN博客&lt;/a>&lt;/p>
&lt;p>这个更是只有个思路的开头，但是时间比较新，22年的。&lt;/p>
&lt;p>重点就是在 &lt;code>CustomEmotion&lt;/code> 文件夹内，所有的文件开头会是 &lt;code>5631XXXX&lt;/code>，&lt;br>
然后这个转译过来——和图片不同——是 &lt;code>V1MMVX&lt;/code> ，算是特别的内容。&lt;br>
除了这6个字节，后面 1024 个字节使用 RSA 加密，剩下的部分用异或加密。&lt;/p>
&lt;p>这里还有更多微信逆向的文章：&lt;br>
&lt;a class="link" href="https://blog.csdn.net/ljc545w?type=blog" target="_blank" rel="noopener"
>勇敢自由-CSDN博客&lt;/a>&lt;/p>
&lt;p>噢，还有个机器人！&lt;br>
&lt;a class="link" href="https://github.com/ljc545w/ComWeChatRobot" target="_blank" rel="noopener"
>ljc545w/ComWeChatRobot: PC微信机器人，实现获取通讯录，发送文本、图片、文件等消息，封装COM接口供Python、C#调用&lt;/a>&lt;/p>
&lt;p>不过只有针对的微信版本可用。&lt;/p></description></item><item><title>QQ NT 版的一些文件结构探索</title><link>https://moyf.github.io/hugo-stack-blog/p/qq-nt-%E7%89%88%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E6%8E%A2%E7%B4%A2/</link><pubDate>Sun, 08 Oct 2023 16:19:00 +0000</pubDate><guid>https://moyf.github.io/hugo-stack-blog/p/qq-nt-%E7%89%88%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E6%8E%A2%E7%B4%A2/</guid><description>&lt;h1 id="qq-nt-版的一些文件结构探索">QQ NT 版的一些文件结构探索&lt;/h1>
&lt;h2 id="起因">起因&lt;/h2>
&lt;p>想解决自己电脑端看不到商城表情的问题。&lt;/p>
&lt;p>结果顺带发现了几个有点意思的路径。&lt;/p>
&lt;h2 id="默认表情">默认表情&lt;/h2>
&lt;p>&lt;code>..\nt_qq\global\nt_data\Emoji\emoji-resource\sysface_res\apng&lt;/code>&lt;/p>
&lt;p>有趣的是其实好几种格式这里都有——甚至还有 apng！&lt;/p>
&lt;p>这里还有个叫 &lt;code>QLotte&lt;/code> 的文件，感觉是和那个动态库 &lt;code>Lottie&lt;/code> 有关？&lt;/p>
&lt;h2 id="关联推荐表情">关联推荐表情&lt;/h2>
&lt;p>&lt;code>..\[QQ号]\nt_qq\nt_data\Emoji\emoji-related\emoji\&lt;/code>&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/qq-nt-%E7%89%88%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E6%8E%A2%E7%B4%A2/Assets/Pasted-image-20231009002943.png"
width="730"
height="335"
loading="lazy"
class="gallery-image"
data-flex-grow="217"
data-flex-basis="522px"
>&lt;br>
那些打字出现的关联表情都会在这儿，可以看到好多类似含义的缓存图片。&lt;/p>
&lt;p>这些图片默认也是没有后缀名的，但是没有关系，可以直接用 QK 动作一键添加。&lt;/p>
&lt;p>可惜不知道和文本的关系存在哪里。&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>words.json&lt;/code> 里存着一些文字，应该是能触发出关联推荐的关键字吧。&lt;/p>
&lt;/blockquote>
&lt;h4 id="应用">应用&lt;/h4>
&lt;p>比如刚输入完文字然后闪过一个想要的表情，没能选中。&lt;br>
以前我都是再反复翻好多页尝试找出来的，现在可以直接在这个文件夹按修改时间查找，一下子就找到了。&lt;/p>
&lt;h2 id="自定义表情漫游表情">自定义表情（漫游表情）&lt;/h2>
&lt;p>&lt;code>..\[QQ号]\nt_qq\nt_data\Emoji\personal_emoji\Ori&lt;/code>&lt;br>
这里则是——自定义表情！&lt;/p>
&lt;p>以前可以导出 &lt;code>eif&lt;/code> 的，现在新版不支持了，但是反而可以直接看到图片文件。&lt;br>
所以直接备份这个文件夹就可以啦。&lt;/p>
&lt;p>顺便一提，会看到一些不知道怎么混进来的图片 🤔&lt;br>
（可能是其他人的自定义表情？）&lt;/p>
&lt;h2 id="表情商店">表情商店&lt;/h2>
&lt;p>&lt;code>..\[QQ号]\nt_qq\nt_data\Emoji\marketface&lt;/code>&lt;br>
这里能看到&lt;em>出现在聊天框过的&lt;/em>商城表情包。&lt;br>
不管是别人发的（哪怕自己并不拥有）的表情还是自己发的表情，都在里面。&lt;/p>
&lt;p>会按照表情包合集区分文件夹。&lt;/p>
&lt;p>&lt;em>💡 回头批量提取出来？&lt;/em>&lt;/p>
&lt;h3 id="表情商店图片">表情商店图片&lt;/h3>
&lt;p>&lt;code>..\[QQ号]\nt_qq\nt_data\Emoji\emoji-recv&lt;/code>&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/qq-nt-%E7%89%88%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E6%8E%A2%E7%B4%A2/Assets/Pasted-image-20231009003811.png"
width="730"
height="459"
loading="lazy"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="381px"
>&lt;br>
这里就是接收的表情包啦（应该也包括自己发出去的）。&lt;br>
会按照月份分开文件夹保存。&lt;/p>
&lt;p>&lt;em>❗ 感觉适合用来作为 Quicker 表情包检索动作的素材来源！&lt;/em>&lt;br>
&lt;em>不过大概需要先去重……&lt;/em>&lt;/p>
&lt;h2 id="聊天图片">聊天图片&lt;/h2>
&lt;p>&lt;code>..\[QQ号]\nt_qq\nt_data\Pic\2023-10\Ori&lt;/code>&lt;br>
和上面的&lt;strong>表情包 Emote&lt;/strong>区分开来的其他图片。&lt;br>
（也不知道是靠什么区分的……）&lt;/p>
&lt;h4 id="其他媒体文件">其他媒体文件&lt;/h4>
&lt;p>还有 &lt;code>Video&lt;/code> 啥的，同理，这里不再赘述……&lt;/p>
&lt;p>不过有个 &lt;code>ptt&lt;/code> 不知道是啥，里面是 &lt;code>amr&lt;/code> 格式的文件。&lt;/p>
&lt;h2 id="企业微信的表情包">企业微信的表情包&lt;/h2>
&lt;p>顺便，之前发现的：&lt;br>
&lt;code>E:\Documents\WXWork\1688853793444655\Emotion\2019-12&lt;/code>&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/qq-nt-%E7%89%88%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E6%8E%A2%E7%B4%A2/Assets/Pasted-image-20231008162101.png"
width="800"
height="560"
loading="lazy"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="342px"
>&lt;/p>
&lt;p>可以通过双击图片快速打开：&lt;br>
&lt;img src="https://moyf.github.io/hugo-stack-blog/hugo-stack-blog/p/qq-nt-%E7%89%88%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E6%8E%A2%E7%B4%A2/Assets/Pasted-image-20231008162132.png"
width="640"
height="480"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p></description></item></channel></rss>